<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ggswim">
<title>Getting Started with ggswim • ggswim</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with ggswim">
<meta property="og:description" content="ggswim">
<meta property="og:image" content="https://chop-cgtinformatics.github.io/ggswim/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ggswim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/ggswim.html">Get Started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/add_arrows.html">Adding Arrows</a>
    <a class="dropdown-item" href="../articles/fixed_markers.html">Fixed Mapping with Markers</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CHOP-CGTInformatics/ggswim/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<link href="ggswim_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="ggswim_files/pagedtable-1.1/js/pagedtable.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting Started with ggswim</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CHOP-CGTInformatics/ggswim/blob/HEAD/vignettes/articles/ggswim.Rmd" class="external-link"><code>vignettes/articles/ggswim.Rmd</code></a></small>
      <div class="d-none name"><code>ggswim.Rmd</code></div>
    </div>

    
    
<p>The ggswim package eases the development of swimmer plots in R
through integration with the ggplot2 framework. In this vignette, we’ll
walk through how users can create visually striking swimmer plots.</p>
<p>At the heart of ggswim are two core functions: <code><a href="../reference/ggswim.html">ggswim()</a></code>
and <code><a href="../reference/add_marker.html">add_marker()</a></code>. The former, an extension of
<code><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment()</a></code>, allows users to construct the horizontal
bars, what we’ll sometimes refer to as “lanes.” Meanwhile,
<code><a href="../reference/add_marker.html">add_marker()</a></code> wraps both <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point()</a></code> and
<code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label()</a></code> to effortlessly embed key events, or
“markers,” onto the lanes. These can take the form of unicode shapes,
symbols, or even emojis.</p>
<p>Drawing from the well-established principles of ggplot2, ggswim
allows users to apply familiar layer-building techniques, including the
application of styles and themes.</p>
<div class="section level3">
<h3 id="building-swimmer-plots-with-aesthetic-mapping">Building swimmer plots with aesthetic mapping<a class="anchor" aria-label="anchor" href="#building-swimmer-plots-with-aesthetic-mapping"></a>
</h3>
<p>To start, let’s build a swimmer plot using <code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes()</a></code> and
aesthetic mapped data (for fixed mapping, see <a href="https://chop-cgtinformatics.github.io/ggswim/articles/fixed_markers.html">Fixed
Mapping with Markers</a>). As with the README, we will be using ggswim’s
internal datasets: <code>patient_data</code>,
<code>infusion_events</code>, and <code>end_study_events</code>.</p>
<p>Let’s start with observing <code>patient_data</code>’s structure:</p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["pt_id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["disease_assessment"],"name":[2],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["end_time"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["status"],"name":[5],"type":["lgl"],"align":["right"]},{"label":["status_length"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"01","2":"CR/CRi + B Cell Recovery","3":"-2.8","4":"0.0","5":"FALSE","6":"10.2"},{"1":"01","2":"RD","3":"0.0","4":"0.9","5":"FALSE","6":"10.2"},{"1":"01","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"1.8","5":"FALSE","6":"10.2"},{"1":"01","2":"CR/CRi + B Cell Recovery","3":"1.8","4":"2.0","5":"FALSE","6":"10.2"},{"1":"02","2":"RD","3":"-2.8","4":"0.0","5":"FALSE","6":"9.0"},{"1":"02","2":"CRi","3":"0.0","4":"0.2","5":"FALSE","6":"9.0"},{"1":"03","2":"CR/CRi + B Cell Recovery","3":"-2.4","4":"0.0","5":"FALSE","6":"16.6"},{"1":"03","2":"CR/CRi + B Cell Recovery","3":"0.0","4":"0.9","5":"FALSE","6":"16.6"},{"1":"03","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"2.8","5":"FALSE","6":"16.6"},{"1":"03","2":"CR/CRi + B Cell Aplasia","3":"2.8","4":"6.2","5":"FALSE","6":"16.6"},{"1":"03","2":"CR/CRi + B Cell Recovery","3":"6.2","4":"8.4","5":"FALSE","6":"16.6"},{"1":"03","2":"CR/CRi + B Cell Recovery","3":"8.4","4":"11.9","5":"FALSE","6":"16.6"},{"1":"03","2":"CR/CRi + B Cell Recovery","3":"11.9","4":"11.9","5":"FALSE","6":"16.6"},{"1":"04","2":"CR/CRi + B Cell Recovery","3":"-3.8","4":"0.0","5":"FALSE","6":"9.5"},{"1":"04","2":"CR/CRi + B Cell Recovery","3":"0.0","4":"0.9","5":"FALSE","6":"9.5"},{"1":"04","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"3.0","5":"FALSE","6":"9.5"},{"1":"04","2":"CR/CRi + B Cell Aplasia","3":"3.0","4":"6.2","5":"TRUE","6":"9.5"},{"1":"05","2":"RD","3":"-5.0","4":"0.0","5":"FALSE","6":"13.8"},{"1":"05","2":"CR/CRi + B Cell Recovery","3":"0.0","4":"0.9","5":"FALSE","6":"13.8"},{"1":"05","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"2.7","5":"FALSE","6":"13.8"},{"1":"05","2":"CR/CRi + B Cell Aplasia","3":"2.7","4":"5.7","5":"FALSE","6":"13.8"},{"1":"05","2":"CR/CRi + B Cell Recovery","3":"5.7","4":"8.9","5":"TRUE","6":"13.8"},{"1":"06","2":"CR/CRi + B Cell Recovery","3":"-2.1","4":"-0.2","5":"FALSE","6":"14.8"},{"1":"06","2":"CR/CRi + B Cell Recovery","3":"-0.2","4":"0.9","5":"FALSE","6":"14.8"},{"1":"06","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"2.8","5":"FALSE","6":"14.8"},{"1":"06","2":"CR/CRi + B Cell Recovery","3":"2.8","4":"4.8","5":"FALSE","6":"14.8"},{"1":"08","2":"RD","3":"-6.3","4":"-0.2","5":"FALSE","6":"12.7"},{"1":"08","2":"CR/CRi + B Cell Aplasia","3":"-0.2","4":"0.9","5":"FALSE","6":"12.7"},{"1":"08","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"3.3","5":"FALSE","6":"12.7"},{"1":"08","2":"CR/CRi + B Cell Aplasia","3":"3.3","4":"5.7","5":"FALSE","6":"12.7"},{"1":"08","2":"CR/CRi + B Cell Aplasia","3":"5.7","4":"8.8","5":"TRUE","6":"12.7"},{"1":"09","2":"CR/CRi + B Cell Recovery","3":"-5.7","4":"0.0","5":"FALSE","6":"10.8"},{"1":"09","2":"RD","3":"0.0","4":"0.9","5":"FALSE","6":"10.8"},{"1":"09","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"3.3","5":"FALSE","6":"10.8"},{"1":"09","2":"CR/CRi + B Cell Aplasia","3":"3.3","4":"5.8","5":"FALSE","6":"10.8"},{"1":"09","2":"CR/CRi + B Cell Aplasia","3":"5.8","4":"8.3","5":"TRUE","6":"10.8"},{"1":"12","2":"RD","3":"-3.6","4":"0.0","5":"FALSE","6":"11.5"},{"1":"12","2":"RD","3":"0.0","4":"0.9","5":"FALSE","6":"11.5"},{"1":"12","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"3.0","5":"FALSE","6":"11.5"},{"1":"12","2":"CR/CRi + B Cell Aplasia","3":"3.0","4":"6.2","5":"FALSE","6":"11.5"},{"1":"12","2":"CR/CRi + B Cell Aplasia","3":"6.2","4":"9.0","5":"FALSE","6":"11.5"},{"1":"12","2":"CR/CRi + B Cell Aplasia","3":"9.0","4":"7.9","5":"TRUE","6":"11.5"},{"1":"13","2":"RD","3":"-3.4","4":"-0.2","5":"TRUE","6":"0.7"},{"1":"17","2":"CR/CRi + B Cell Recovery","3":"-3.7","4":"-0.2","5":"FALSE","6":"1.4"},{"1":"17","2":"CR","3":"-0.2","4":"0.9","5":"TRUE","6":"1.4"},{"1":"18","2":"CR","3":"-3.5","4":"0.0","5":"FALSE","6":"2.6"},{"1":"18","2":"RD","3":"0.0","4":"0.9","5":"TRUE","6":"2.6"},{"1":"19","2":"CR","3":"-2.0","4":"-0.2","5":"FALSE","6":"3.5"},{"1":"19","2":"CR","3":"-0.2","4":"0.9","5":"FALSE","6":"3.5"},{"1":"19","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"3.0","5":"TRUE","6":"3.5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><code>patient_data</code> contains a long pivoted dataset where
patient ID’s (<code>pt_id</code>) can be repeated. These rows are
differentiated by <code>disease_assessments</code>s combined with
corresponding start and end times, representing months. Together, these
rows signify a patient survival timeline.</p>
<ul>
<li>
<code>disease_assessment</code> is broken down by the following
nomenclature along with some indiciator of B-cell status (if
applicable):
<ul>
<li>CR = “Complete Response”</li>
<li>CRi = “Complete Response with Incomplete Blood Count Recovery”</li>
<li>RD = “Relapsed Disease”</li>
</ul>
</li>
</ul>
<p>The columns <code>status</code> and <code>status_length</code> are
indicator columns for arrow support, and discussed in greater detail in
<a href="https://chop-cgtinformatics.github.io/ggswim/articles/add_arrows.html">Adding
arrows to ggswim</a></p>
<p>Now, let’s make the plot using <code><a href="../reference/ggswim.html">ggswim()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggswim.html">ggswim</a></span><span class="op">(</span></span>
<span>  <span class="va">patient_data</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">start_time</span>,</span>
<span>    xend <span class="op">=</span> <span class="va">end_time</span>,</span>
<span>    y <span class="op">=</span> <span class="va">pt_id</span>,</span>
<span>    color <span class="op">=</span> <span class="va">disease_assessment</span></span>
<span>  <span class="op">)</span>,</span>
<span>  linewidth <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="ggswim_files/figure-html/ggswim%20plot-1.png" width="1152"></p>
<p>Here we have a simple line graph, showing infusions grouped by
patients with a given disease assessment status. <code><a href="../reference/ggswim.html">ggswim()</a></code>
does the work of setting up a <code><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment()</a></code> and readying
our plot layers for additional ggswim-specific features such as the
“markers” mentioned earlier. Let’s add a marker layer next from the
<code>infusion_events</code> dataset:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">infusion_events</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/paged_table.html" class="external-link">paged_table</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["pt_id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["time_from_initial_infusion"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["infusion_type"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"01","2":"0.0","3":"Initial Infusion"},{"1":"02","2":"0.0","3":"Initial Infusion"},{"1":"03","2":"0.0","3":"Initial Infusion"},{"1":"03","2":"3.0","3":"Reinfusion"},{"1":"04","2":"0.0","3":"Initial Infusion"},{"1":"05","2":"0.0","3":"Initial Infusion"},{"1":"05","2":"4.3","3":"Reinfusion"},{"1":"06","2":"0.0","3":"Initial Infusion"},{"1":"08","2":"0.0","3":"Initial Infusion"},{"1":"08","2":"2.5","3":"Reinfusion"},{"1":"09","2":"0.0","3":"Initial Infusion"},{"1":"12","2":"0.0","3":"Initial Infusion"},{"1":"13","2":"0.0","3":"Initial Infusion"},{"1":"17","2":"0.0","3":"Initial Infusion"},{"1":"18","2":"0.0","3":"Initial Infusion"},{"1":"19","2":"0.0","3":"Initial Infusion"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>This dataset is much simpler, having only 3 columns indicating the
time from the initial infusion, where 0 is an initial infusion and
reinfusions at some point beyond 0 (if a patient had any). These are
also categorized under <code>infusion_type</code>.</p>
<p>In order to separate layers of identical types, in this case
<code>color</code>s, we need a way to separate out the legend by lanes
and markers. By default, ggplot2 will group these together, but by using
<code><a href="https://eliocamp.github.io/ggnewscale/reference/new_scale.html" class="external-link">new_scale_color()</a></code> from the ggnewscale package we can
specify that we want to actually keep these in their own scales.
<code><a href="https://eliocamp.github.io/ggnewscale/reference/new_scale.html" class="external-link">new_scale_color()</a></code> can be used to make any number of
separations you need, just be sure to call a separation at the top of
each marker call and include any additional scale changes before moving
on to the next one.</p>
<p>Because <code><a href="https://eliocamp.github.io/ggnewscale/reference/new_scale.html" class="external-link">new_scale_color()</a></code> establishes the start of a new
scale, it is important to define any scale changes we want before
calling it and moving on to the next one. It is a common workflow to use
<code><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual()</a></code> to change and update the colors and
names of the visible elements in both the plot and the legend, so we’ll
apply it here, just after our swim lane layer but before moving on to
adding the markers.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Overall Disease Assessment"</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#6394F3"</span>, <span class="st">"#F3C363"</span>, <span class="st">"#EB792F"</span>, <span class="st">"#d73a76"</span>, <span class="st">"#85a31e"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://eliocamp.github.io/ggnewscale/reference/new_scale.html" class="external-link">new_scale_color</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/add_marker.html">add_marker</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">infusion_events</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">time_from_initial_infusion</span>,</span>
<span>      y <span class="op">=</span> <span class="va">pt_id</span>,</span>
<span>      color <span class="op">=</span> <span class="va">infusion_type</span>,</span>
<span>      shape <span class="op">=</span> <span class="va">infusion_type</span></span>
<span>    <span class="op">)</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="ggswim_files/figure-html/first%20marker%20plot-1.png" width="1152"></p>
<p>Now we can see shapes have been added to establish our markers for
infusions.</p>
<p>Our last dataset involves end of study events, i.e. events that
indicate a patient has left the study for various reasons.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">end_study_events</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/paged_table.html" class="external-link">paged_table</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["pt_id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["time_from_initial_infusion"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["end_study_label"],"name":[3],"type":["chr"],"align":["left"]},{"label":["end_study_name"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"01","2":"2.0","3":"⚠️","4":"Other End Study Reason"},{"1":"02","2":"0.2","3":"❌","4":"Deceased"},{"1":"03","2":"11.9","3":"✅","4":"Completed Study Follow-Up"},{"1":"06","2":"4.8","3":"⚠️","4":"Other End Study Reason"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You’ll notice that this dataset includes use of emojis under
<code>end_study_label</code>. In addition to shapes and symbols, ggswim
supports the use of emojis when rendering swimmer plots.
<code><a href="../reference/add_marker.html">add_marker()</a></code> allows users to specify shapes or emojis by
using the appropriate <code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes()</a></code> argument callouts:
<code>label_vals</code> and <code>label_names</code>. These are unique
mapping parameters to ggswim, letting it support and wrap both
<code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label()</a></code> at the same
time. Let’s add a layer using emojis via the
<code>end_study_events</code> dataset:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/add_marker.html">add_marker</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">end_study_events</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">time_from_initial_infusion</span>,</span>
<span>      y <span class="op">=</span> <span class="va">pt_id</span>,</span>
<span>      label_vals <span class="op">=</span> <span class="va">end_study_label</span>,</span>
<span>      label_names <span class="op">=</span> <span class="va">end_study_name</span></span>
<span>    <span class="op">)</span>,</span>
<span>    label.size <span class="op">=</span> <span class="cn">NA</span>, fill <span class="op">=</span> <span class="cn">NA</span>, size <span class="op">=</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="ggswim_files/figure-html/second%20marker%20plot-1.png" width="1152"></p>
<p>We’ve successfully made a swimmer plot with lanes and two different
kinds of marker layers. Recall that ggswim works within the ggplot2
framework, therefore customization can be done using the same ggplot2
theme and styling functions users may already be familiar with. It is
typical in this workflow to call <code><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual()</a></code> to
fix up the names and colors of the plot, but be sure to do so in the
proper order with the use of <code><a href="https://eliocamp.github.io/ggnewscale/reference/new_scale.html" class="external-link">new_scale_color()</a></code> mentioned
earlier!</p>
<p>Let’s fix up this plot so it looks nicer on the eyes:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_colour_manual</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Markers"</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"#25DA6D"</span>, <span class="cn">NA</span>, <span class="st">"firebrick"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"My Swimmer Plot"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Time (Months)"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Patient ID"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="ggswim_files/figure-html/mapping%20finalizing-1.png" width="1152"></p>
<p>We can also apply the <code><a href="../reference/theme_ggswim.html">theme_ggswim()</a></code> function:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_ggswim.html">theme_ggswim</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggswim_files/figure-html/mapping%20with%20theme_ggswim-1.png" width="1152"></p>
</div>
<div class="section level3">
<h3 id="additional-notes">Additional notes<a class="anchor" aria-label="anchor" href="#additional-notes"></a>
</h3>
<p>Some additional considerations to keep in mind when working with
ggswim:</p>
<ul>
<li><p><strong>Handling Missing Data:</strong> ggswim does not support
missing data for mapping aesthetics. If any are detected, developers
will receive a warning, and the missing data may appear as
<code>NA</code> values in the display, but will be excluded from the
legend.</p></li>
<li><p><strong>Rendering Emojis and Custom Shapes:</strong> To ensure
emojis and other custom shapes display correctly, users may need to <a href="https://support.posit.co/hc/en-us/articles/360017886674-Troubleshooting-RStudio-Rendering-Errors" class="external-link">switch
their graphics rendering device</a> to AGG.</p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Richard Hanna, Stephan Kadauke, Ezra Porter.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
