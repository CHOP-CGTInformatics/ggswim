<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with ggswim • ggswim</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with ggswim">
<meta name="description" content="Start here for an introduction on how to use ggswim to make swimmer plots.
">
<meta property="og:description" content="Start here for an introduction on how to use ggswim to make swimmer plots.
">
<meta property="og:image" content="https://chop-cgtinformatics.github.io/ggswim/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggswim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/ggswim.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/adding_arrows.html">Adding Arrows</a></li>
    <li><a class="dropdown-item" href="../articles/gallery.html">Gallery</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CHOP-CGTInformatics/ggswim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="ggswim_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="ggswim_files/pagedtable-1.1/js/pagedtable.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting Started with ggswim</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CHOP-CGTInformatics/ggswim/blob/main/vignettes/ggswim.Rmd" class="external-link"><code>vignettes/ggswim.Rmd</code></a></small>
      <div class="d-none name"><code>ggswim.Rmd</code></div>
    </div>

    
    
<p>The ggswim package eases the development of swimmer plots in R
through extension of ggplot2. In this vignette, we’ll walk through how
users can create visually striking swimmer plots.</p>
<p>ggswim offers several layering functions that mimic other “geom”
functions from ggplot2:</p>
<ul>
<li><code><a href="../reference/geom_swim_lane.html">geom_swim_lane()</a></code></li>
<li><code><a href="../reference/geom_swim_marker.html">geom_swim_marker()</a></code></li>
<li><code><a href="../reference/scale_marker_discrete.html">scale_marker_discrete()</a></code></li>
</ul>
<p>The former, an extension of <code><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment()</a></code>, allows users
to construct the horizontal bars, what we’ll sometimes refer to as
“lanes.” Meanwhile, <code><a href="../reference/geom_swim_marker.html">geom_swim_marker()</a></code> wraps
<code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text()</a></code> to effortlessly embed key events of interest,
or “markers,” onto the lanes. These can take the form of shapes,
symbols, or even emojis.</p>
<p>Drawing from the well-established principles of ggplot2, ggswim
allows users to apply familiar layer-building techniques, including the
application of styles and themes. You’ll also see that common behaviors
are still accessible with ggswim such as auto-completing
<code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes()</a></code> parameters with piping.</p>
<div class="section level3">
<h3 id="adding-a-lane-layer">Adding a Lane Layer<a class="anchor" aria-label="anchor" href="#adding-a-lane-layer"></a>
</h3>
<p>Let’s get started building our swimmer plot! As with the README, we
will be using ggswim’s internal datasets: <code>patient_data</code>,
<code>infusion_events</code>, and <code>end_study_events</code>.</p>
<p>Let’s start with observing <code>patient_data</code>’s structure:</p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["pt_id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["disease_assessment"],"name":[2],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["end_time"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"01","2":"CR/CRi + B Cell Recovery","3":"-2.8","4":"0.0"},{"1":"01","2":"RD","3":"0.0","4":"0.9"},{"1":"01","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"0.0"},{"1":"01","2":"CR/CRi + B Cell Aplasia","3":"0.0","4":"1.8"},{"1":"01","2":"CR/CRi + B Cell Recovery","3":"1.8","4":"2.0"},{"1":"02","2":"RD","3":"-2.8","4":"0.0"},{"1":"02","2":"CRi","3":"0.0","4":"0.2"},{"1":"03","2":"CR/CRi + B Cell Recovery","3":"-2.4","4":"0.0"},{"1":"03","2":"CR/CRi + B Cell Recovery","3":"0.0","4":"0.9"},{"1":"03","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"2.8"},{"1":"03","2":"CR/CRi + B Cell Aplasia","3":"2.8","4":"6.2"},{"1":"03","2":"CR/CRi + B Cell Recovery","3":"6.2","4":"8.4"},{"1":"03","2":"CR/CRi + B Cell Recovery","3":"8.4","4":"11.9"},{"1":"03","2":"CR/CRi + B Cell Recovery","3":"11.9","4":"0.0"},{"1":"03","2":"CR/CRi + B Cell Recovery","3":"0.0","4":"11.9"},{"1":"04","2":"CR/CRi + B Cell Recovery","3":"-3.8","4":"0.0"},{"1":"04","2":"CR/CRi + B Cell Recovery","3":"0.0","4":"0.9"},{"1":"04","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"3.0"},{"1":"04","2":"CR/CRi + B Cell Aplasia","3":"3.0","4":"6.2"},{"1":"04","2":"CR/CRi + B Cell Aplasia","3":"6.2","4":"9.0"},{"1":"04","2":"CR/CRi + B Cell Aplasia","3":"9.0","4":"0.0"},{"1":"05","2":"RD","3":"-5.0","4":"0.0"},{"1":"05","2":"CR/CRi + B Cell Recovery","3":"0.0","4":"0.9"},{"1":"05","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"2.7"},{"1":"05","2":"CR/CRi + B Cell Aplasia","3":"2.7","4":"5.7"},{"1":"05","2":"CR/CRi + B Cell Aplasia","3":"5.7","4":"8.9"},{"1":"05","2":"CR/CRi + B Cell Aplasia","3":"8.9","4":"14.1"},{"1":"05","2":"CR/CRi + B Cell Aplasia","3":"14.1","4":"14.1"},{"1":"06","2":"CR/CRi + B Cell Recovery","3":"-2.1","4":"-0.2"},{"1":"06","2":"CR/CRi + B Cell Recovery","3":"-0.2","4":"0.9"},{"1":"06","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"2.8"},{"1":"06","2":"CR/CRi + B Cell Recovery","3":"2.8","4":"4.8"},{"1":"08","2":"RD","3":"-6.3","4":"-0.2"},{"1":"08","2":"CR/CRi + B Cell Aplasia","3":"-0.2","4":"0.9"},{"1":"08","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"3.3"},{"1":"08","2":"CR/CRi + B Cell Aplasia","3":"3.3","4":"5.7"},{"1":"08","2":"CR/CRi + B Cell Aplasia","3":"5.7","4":"8.8"},{"1":"08","2":"RD","3":"8.8","4":"11.7"},{"1":"08","2":"RD","3":"2.5","4":"2.5"},{"1":"09","2":"CR/CRi + B Cell Recovery","3":"-5.7","4":"0.0"},{"1":"09","2":"RD","3":"0.0","4":"0.9"},{"1":"09","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"3.3"},{"1":"09","2":"CR/CRi + B Cell Aplasia","3":"3.3","4":"5.8"},{"1":"09","2":"CR/CRi + B Cell Aplasia","3":"5.8","4":"8.3"},{"1":"09","2":"CR/CRi + B Cell Aplasia","3":"8.3","4":"12.0"},{"1":"12","2":"RD","3":"-3.6","4":"0.0"},{"1":"12","2":"RD","3":"0.0","4":"0.9"},{"1":"12","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"3.0"},{"1":"12","2":"CR/CRi + B Cell Aplasia","3":"3.0","4":"6.2"},{"1":"12","2":"CR/CRi + B Cell Aplasia","3":"6.2","4":"9.0"},{"1":"12","2":"CR/CRi + B Cell Aplasia","3":"9.0","4":"7.9"},{"1":"12","2":"CR/CRi + B Cell Aplasia","3":"7.9","4":"9.7"},{"1":"13","2":"RD","3":"-3.4","4":"-0.2"},{"1":"13","2":"RD","3":"-0.2","4":"0.0"},{"1":"13","2":"RD","3":"0.0","4":"0.0"},{"1":"13","2":"RD","3":"-2.8","4":"-0.2"},{"1":"13","2":"RD","3":"-0.2","4":"0.9"},{"1":"13","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"2.5"},{"1":"14","2":"CRi","3":"-2.6","4":"-0.2"},{"1":"14","2":"RD","3":"-0.2","4":"0.9"},{"1":"15","2":"RD","3":"-2.9","4":"-0.2"},{"1":"15","2":"CRi","3":"-0.2","4":"0.9"},{"1":"15","2":"CR","3":"0.9","4":"0.0"},{"1":"17","2":"CR/CRi + B Cell Recovery","3":"-3.7","4":"-0.2"},{"1":"17","2":"CR","3":"-0.2","4":"0.9"},{"1":"17","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"2.8"},{"1":"17","2":"CR","3":"2.8","4":"0.0"},{"1":"18","2":"CR","3":"-3.5","4":"0.0"},{"1":"18","2":"RD","3":"0.0","4":"0.9"},{"1":"18","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"3.3"},{"1":"18","2":"CR/CRi + B Cell Aplasia","3":"3.3","4":"0.0"},{"1":"19","2":"CR","3":"-2.0","4":"-0.2"},{"1":"19","2":"CR","3":"-0.2","4":"0.9"},{"1":"19","2":"CR/CRi + B Cell Aplasia","3":"0.9","4":"3.0"},{"1":"19","2":"CR/CRi + B Cell Aplasia","3":"3.0","4":"6.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><code>patient_data</code> contains a long pivoted dataset where
patient ID’s (<code>pt_id</code>) can be repeated. These rows are
differentiated by <code>disease_assessments</code>s combined with
corresponding start and end times, representing months. Together, these
rows signify a patient survival timeline.</p>
<ul>
<li>
<code>disease_assessment</code> is broken down by the following
nomenclature along with some indicator of B-cell status (if applicable):
<ul>
<li>CR = “Complete Response”</li>
<li>CRi = “Complete Response with Incomplete Blood Count Recovery”</li>
<li>RD = “Relapsed Disease”</li>
</ul>
</li>
</ul>
<p>Now, let’s make the plot using <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot()</a></code> and our first
layer with <code><a href="../reference/geom_swim_lane.html">geom_swim_lane()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_swim_lane.html">geom_swim_lane</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">patient_data</span>,</span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">start_time</span>,</span>
<span>      xend <span class="op">=</span> <span class="va">end_time</span>,</span>
<span>      y <span class="op">=</span> <span class="va">pt_id</span>,</span>
<span>      color <span class="op">=</span> <span class="va">disease_assessment</span></span>
<span>    <span class="op">)</span>,</span>
<span>    linewidth <span class="op">=</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="ggswim_files/figure-html/ggswim%20plot-1.png" width="100%"></p>
<p>Here we have a simple segment graph, showing infusions grouped by
patients with a given disease assessment status.
<code><a href="../reference/geom_swim_lane.html">geom_swim_lane()</a></code> does the work of setting up
<code><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment()</a></code> and readying our plot layers for additional
ggswim-specific features such as the “markers” mentioned earlier. It’s
worth noting that <code><a href="../reference/geom_swim_lane.html">geom_swim_lane()</a></code> is a very thin wrapper
around <code><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment()</a></code> and supports the same functionality
apart from a <code>yend</code>.</p>
</div>
<div class="section level2">
<h2 id="adding-a-marker-layer-points">Adding a Marker Layer: Points<a class="anchor" aria-label="anchor" href="#adding-a-marker-layer-points"></a>
</h2>
<p>Now, let’s add a marker layer by first inspecting the
<code>infusion_events</code> and <code>end_study_events</code>
datasets:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">infusion_events</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/paged_table.html" class="external-link">paged_table</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["pt_id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["time_from_initial_infusion"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["label"],"name":[3],"type":["chr"],"align":["left"]},{"label":["glyph"],"name":[4],"type":["chr"],"align":["left"]},{"label":["colour"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"01","2":"1.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"02","2":"0.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"03","2":"2.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"03","2":"3.0","3":"Second Reinfusion","4":"⬤","5":"#f57dc1"},{"1":"04","2":"5.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"05","2":"2.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"05","2":"4.3","3":"Second Reinfusion","4":"⬤","5":"#f57dc1"},{"1":"06","2":"2.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"08","2":"1.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"08","2":"2.5","3":"Second Reinfusion","4":"⬤","5":"#f57dc1"},{"1":"09","2":"7.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"12","2":"6.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"13","2":"1.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"14","2":"0.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"15","2":"0.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"17","2":"1.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"18","2":"3.0","3":"First Reinfusion","4":"⬤","5":"#999999"},{"1":"19","2":"4.0","3":"First Reinfusion","4":"⬤","5":"#999999"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>This dataset is much simpler, indicating the time from the initial
infusion, where 0 is an initial infusion and reinfusions at some point
beyond 0 (if a patient had any). These are also categorized under
<code>label</code>. <code>glyph</code> and <code>colour</code> will
serve as helpful specifiers when we add our markers onto our swimmer
plot.</p>
<p>Next, let’s look at our end of study events, i.e. events that
indicate a patient has left the study for various reasons.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">end_study_events</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/paged_table.html" class="external-link">paged_table</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["pt_id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["time_from_initial_infusion"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["label"],"name":[3],"type":["chr"],"align":["left"]},{"label":["glyph"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"01","2":"2.0","3":"Other End Study Reason","4":"⚠️"},{"1":"02","2":"0.2","3":"Deceased","4":"❌"},{"1":"03","2":"11.9","3":"Completed Study Follow-Up","4":"✅"},{"1":"05","2":"14.1","3":"Completed Study Follow-Up","4":"✅"},{"1":"06","2":"4.8","3":"Other End Study Reason","4":"⚠️"},{"1":"08","2":"11.7","3":"Other End Study Reason","4":"⚠️"},{"1":"12","2":"9.7","3":"Other End Study Reason","4":"⚠️"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You’ll notice that this dataset includes use of emojis under
<code>glyph</code>. In addition to shapes and symbols, ggswim supports
the use of emojis when rendering swimmer plots. <span style="color:red">If issues arise in rendering, you may need to check
your options settings and ensure a proper graphics device like
“AGG”.</span></p>
<p>While it’s common to encounter these as separate datasets in the
wild, it will make our lives much easier to combine
<code>end_study_events</code> and <code>infusion_events</code> together
since they share roughly the same data structure and the markers exist
on the same timeline.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_events</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>  <span class="va">infusion_events</span>,</span>
<span>  <span class="va">end_study_events</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">all_events</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 25 × 5</span></span></span>
<span><span class="co">#&gt;    pt_id time_from_initial_infusion label             glyph colour </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 01                           1   First Reinfusion  ⬤     #999999</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 02                           0   First Reinfusion  ⬤     #999999</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 03                           2   First Reinfusion  ⬤     #999999</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 03                           3   Second Reinfusion ⬤     #f57dc1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 04                           5   First Reinfusion  ⬤     #999999</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 05                           2   First Reinfusion  ⬤     #999999</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 05                           4.3 Second Reinfusion ⬤     #f57dc1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 06                           2   First Reinfusion  ⬤     #999999</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08                           1   First Reinfusion  ⬤     #999999</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08                           2.5 Second Reinfusion ⬤     #f57dc1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15 more rows</span></span></span></code></pre></div>
<p>Let’s now call <code><a href="../reference/geom_swim_marker.html">geom_swim_marker()</a></code> and add the events
onto our plot. To do this, we will use <code><a href="../reference/geom_swim_marker.html">geom_swim_marker()</a></code>’s
custom <code>marker</code> <code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes()</a></code> parameter:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_swim_marker.html">geom_swim_marker</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">all_events</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">time_from_initial_infusion</span>,</span>
<span>      y <span class="op">=</span> <span class="va">pt_id</span>,</span>
<span>      marker <span class="op">=</span> <span class="va">label</span></span>
<span>    <span class="op">)</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">4</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="ggswim_files/figure-html/second%20marker%20plot-1.png" width="100%"></p>
<p>We’ve successfully made a swimmer plot with lanes and two different
kinds of marker layers! Notice how even though both the lanes and
markers use the color scale, they are separated in the legend output.
Let’s take it one step further and make use of the <code>glyph</code>
and <code>colour</code> columns we specified. After all, who doesn’t
love some emojis?</p>
</div>
<div class="section level2">
<h2 id="a-sense-of-scale">A Sense of Scale<a class="anchor" aria-label="anchor" href="#a-sense-of-scale"></a>
</h2>
<p><code><a href="../reference/scale_marker_discrete.html">scale_marker_discrete()</a></code> makes it easy to specify and
take finer control over your markers and their appearance in the legend.
Typically, it can be difficult to have emojis or labels appear in the
place of legend glyphs. Let’s take a look at a typical output using base
ggplot2 with <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">all_events</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time_from_initial_infusion</span>, y <span class="op">=</span> <span class="va">pt_id</span>, label <span class="op">=</span> <span class="va">label</span>, colour <span class="op">=</span> <span class="va">glyph</span><span class="op">)</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">4</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="ggswim_files/figure-html/unnamed-chunk-2-1.png" width="100%"></p>
<p><code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text()</a></code> does a decent job, and is actually what
<code><a href="../reference/geom_swim_marker.html">geom_swim_marker()</a></code> wraps. However, at it’s base level it
doesn’t quite set up the use of glyphs the way we would like to see them
in the legend display. Additionally, those glyphs don’t appear in the
plot. You could try to rework this with <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point()</a></code> or
<code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label()</a></code>, but would still run into issues with scale
assignment.</p>
<p>Thanks to ggswim we can specify what belongs in the glyph versus text
elements of our legend. Additionally, we are able to use the “colour”
scales under the <code>marker</code> definition so ggswim can use the
same colour scale under the hood, but keep the identity of “markers” and
“lanes” separate in the output:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/scale_marker_discrete.html">scale_marker_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Study Events"</span>,</span>
<span>                        glyphs <span class="op">=</span> <span class="va">all_events</span><span class="op">$</span><span class="va">glyph</span>,</span>
<span>                        colours <span class="op">=</span> <span class="va">all_events</span><span class="op">$</span><span class="va">colour</span>,</span>
<span>                        limits <span class="op">=</span> <span class="va">all_events</span><span class="op">$</span><span class="va">label</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="ggswim_files/figure-html/unnamed-chunk-3-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="a-full-swimmer-plot">A Full Swimmer Plot<a class="anchor" aria-label="anchor" href="#a-full-swimmer-plot"></a>
</h2>
<p>As mentioned in the README, all of the same ggplot2 techniques you
would apply to your usual plots apply here. Below, we update the lanes
to match a nicer pallete with a new name and add on some plot
labels:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Disease Assessments"</span>,</span>
<span>    palette <span class="op">=</span> <span class="st">"Set1"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"My Swimmer Plot"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Time (Months)"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Patient ID"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="ggswim_files/figure-html/mapping%20finalizing-1.png" width="100%"></p>
<p>We can also apply the <code><a href="../reference/theme_ggswim.html">theme_ggswim()</a></code> function:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_ggswim.html">theme_ggswim</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggswim_files/figure-html/mapping%20with%20theme_ggswim-1.png" width="100%"></p>
<div class="section level3">
<h3 id="additional-notes">Additional notes<a class="anchor" aria-label="anchor" href="#additional-notes"></a>
</h3>
<p>Some additional considerations to keep in mind when working with
ggswim:</p>
<ul>
<li>
<strong>Rendering Emojis and Custom Shapes:</strong> To ensure
emojis and other custom shapes display correctly, users may need to <a href="https://support.posit.co/hc/en-us/articles/360017886674-Troubleshooting-RStudio-Rendering-Errors" class="external-link">switch
their graphics rendering device</a> to AGG.</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Richard Hanna, Stephan Kadauke, Ezra Porter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
