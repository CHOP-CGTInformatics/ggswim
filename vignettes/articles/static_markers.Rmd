---
title: "Static Mapping with Markers"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.width = 12,
  fig.height = 6
)
```

In [Getting Started with ggswim](https://chop-cgtinformatics.github.io/ggswim/articles/ggswim.html), we showcased how to add markers to a swimmer plot using "dynamic" mapping. This is a common use case, but not always the most applicable one. That's why ggswim caters to both dynamic and static marker assignments.

In this case, static marker assignment lets users call `add_marker()` and pass a single marker at a time with a manually defined color or shape as a parameter instead of passing a mapped column of values. Let's see how this works by splitting up `infusion_events` into distinct data frames.

```{r static mapping initial_infusions}
library(ggswim)

initial_infusions <- infusion_events |>
  dplyr::filter(delta_t0 == 0)

initial_infusions |>
  rmarkdown::paged_table()
```

```{r static mapping reinfusions}
reinfusions <- infusion_events |>
  dplyr::filter(delta_t0 > 0)

reinfusions |>
  rmarkdown::paged_table()
```

We'll start by setting up the same swimmer plot we've made from previous examples: 

```{r initial plot, message=FALSE, warning=FALSE}
p <- ggswim(
  data = patient_data,
  mapping = aes(x = delta_t0_months, y = pt_id, fill = disease_assessment)
)
```

Now, building off of this, lets add out `initial_infusions` and `reinfusions` markers as separate calls to `add_marker()`:

```{r static plot no name, message=FALSE, warning=FALSE}
p +
  # New manual color markers for Infusions
  add_marker(
    data = initial_infusions,
    aes(x = delta_t0_months, y = pt_id, name = "Infusion"),
    size = 5, position = "identity", color = "green"
  ) +
  add_marker(
    data = reinfusions,
    aes(x = delta_t0_months, y = pt_id, name = "Reinfusion"),
    size = 5, position = "identity", color = "red"
  ) +
  theme_ggswim()
```

Notice here how we specified a `color` outside of `aes()`, along with a unique `aes()` param: `name`. `name` is required to show static layers in the legend, and also for proper display in cases where a static marker is the first one added.
